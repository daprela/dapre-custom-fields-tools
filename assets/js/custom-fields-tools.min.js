!function(e){var t={};function n(a){if(t[a])return t[a].exports;var r=t[a]={i:a,l:!1,exports:{}};return e[a].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=e,n.c=t,n.d=function(e,t,a){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(n.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(a,r,function(t){return e[t]}.bind(null,r));return a},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=13)}([function(e,t){e.exports=React},function(e,t,n){var a=n(10),r=n(11),o=n(5),l=n(12);e.exports=function(e,t){return a(e)||r(e,t)||o(e,t)||l()}},function(e,t,n){var a=n(7),r=n(8),o=n(5),l=n(9);e.exports=function(e){return a(e)||r(e)||o(e)||l()}},function(e,t){e.exports=ReactDOM},function(e,t){e.exports=function(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}},function(e,t,n){var a=n(4);e.exports=function(e,t){if(e){if("string"==typeof e)return a(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?a(e,t):void 0}}},function(e,t){var n=document.querySelector(".js-copyOptionTo"),a=document.querySelector(".js-copyUserFieldTo"),r=document.querySelector(".js-copyPostFieldTo"),o=document.querySelector(".js-optionToUserField"),l=document.querySelector(".js-optionToOption"),i=document.querySelector(".js-optionToPostField"),c=document.querySelector(".js-userFieldToUserField"),s=document.querySelector(".js-userFieldToOption"),u=document.querySelector(".js-userFieldToPostField"),d=document.querySelector(".js-postFieldToUserField"),m=document.querySelector(".js-postFieldToOption"),p=document.querySelector(".js-postFieldToPostField");function f(e){e.classList.remove("is-open")}function v(e){e.classList.add("is-open")}n.addEventListener("click",(function(e){var t=e.target;"option"===t.value&&(f(o),f(i),v(l)),"user field"===t.value&&(f(l),f(i),v(o)),"post field"===t.value&&(f(o),f(l),v(i))}),!1),a.addEventListener("click",(function(e){var t=e.target;"option"===t.value&&(f(c),f(u),v(s)),"user field"===t.value&&(f(s),f(u),v(c)),"post field"===t.value&&(f(s),f(c),v(u))}),!1),r.addEventListener("click",(function(e){var t=e.target;"option"===t.value&&(f(d),f(p),v(m)),"user field"===t.value&&(f(m),f(p),v(d)),"post field"===t.value&&(f(m),f(d),v(p))}),!1)},function(e,t,n){var a=n(4);e.exports=function(e){if(Array.isArray(e))return a(e)}},function(e,t){e.exports=function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}},function(e,t){e.exports=function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}},function(e,t){e.exports=function(e){if(Array.isArray(e))return e}},function(e,t){e.exports=function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var n=[],a=!0,r=!1,o=void 0;try{for(var l,i=e[Symbol.iterator]();!(a=(l=i.next()).done)&&(n.push(l.value),!t||n.length!==t);a=!0);}catch(e){r=!0,o=e}finally{try{a||null==i.return||i.return()}finally{if(r)throw o}}return n}}},function(e,t){e.exports=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}},function(e,t,n){"use strict";n.r(t);wp.apiFetch;function a(){var e=Array.from(document.querySelectorAll(".js-userFieldsDataRow"));e.forEach((function(t,n){var a=t.querySelector(".js-addRemoveUserRow");a.style.top="".concat(t.offsetTop+t.offsetHeight-10,"px"),n<e.length-1?(a.innerHTML="-",a.title="Remove the next row"):(a.innerHTML="+",a.title="Add another row")}))}function r(){var e=Array.from(document.querySelectorAll(".js-postFieldsDataRow"));e.forEach((function(t,n){var a=t.querySelector(".js-addRemovePostRow");a.style.top="".concat(t.offsetTop+t.offsetHeight-10,"px"),n<e.length-1?(a.innerHTML="-",a.title="Remove the next row"):(a.innerHTML="+",a.title="Add another row")}))}var o=document.querySelector(".js-tab_1"),l=document.querySelector(".js-tab_2"),i=document.querySelector(".js-tab_3"),c=document.querySelector(".js-optionsForm"),s=document.querySelector(".js-userFieldsForm"),u=document.querySelector(".js-postFieldsForm"),d=function(){o.classList.remove("nav-tab-active"),c.classList.add("is-hidden")},m=function(){l.classList.remove("nav-tab-active"),s.classList.add("is-hidden")},p=function(){i.classList.remove("nav-tab-active"),u.classList.add("is-hidden")};o.addEventListener("click",(function(e){e.preventDefault(),o.classList.add("nav-tab-active"),c.classList.remove("is-hidden"),o.blur(),m(),p()}),!1),l.addEventListener("click",(function(e){e.preventDefault(),l.classList.add("nav-tab-active"),s.classList.remove("is-hidden"),l.blur(),a(),d(),p()}),!1),i.addEventListener("click",(function(e){e.preventDefault(),i.classList.add("nav-tab-active"),u.classList.remove("is-hidden"),i.blur(),r(),d(),m()}),!1);n(6);var f=function(e){return/^-?\d+$/.test(e)},v=function(e){if(f(e))return!0;var t=new Date(e);return!isNaN(t.valueOf())},y=function(){document.querySelector(".js-halfCircleSpinner").classList.remove("is-hidden")},b=function(){document.querySelector(".js-halfCircleSpinner").classList.add("is-hidden")},j=wp.apiFetch,h=document.querySelector(".js-submitRenameOption"),N=document.querySelector(".js-submitCopyOption"),w="".concat("options","/rename"),S="".concat("options","/copy");h.addEventListener("click",(function(e){e.preventDefault(),y(),h.disabled=!0;var t={oldOptionName:document.querySelector(".js-oldOptionName").value,newOptionName:document.querySelector(".js-newOptionName").value},n=JSON.stringify(t);j({path:"".concat("dapre-cft/v1","/").concat(w),method:"POST",body:n,parse:!1,headers:{"Content-type":"application/json"}}).then((function(e){return e.json()})).then((function(e){!function(e){var t,n=document.querySelector(".js-oldOptionName"),a=document.querySelector(".js-newOptionName");e.renamed?((t=new Lightbox({openAnimation:"fadein",closeAnimation:"shrink"})).setTitle("Done"),n.value="",a.value=""):(t=new Lightbox({openAnimation:"jelly",closeAnimation:"collapse"})).setTitle("ERROR"),t.setContent(e.message),t.open(),b(),h.disabled=!1}(e)}))}),!1),N.addEventListener("click",(function(e){var t,n,a,r,o,l,i;e.preventDefault(),y(),N.disabled=!0;var c=document.querySelector(".js-currentOptionName").value,s=document.querySelector("input[type=radio][name=copy_option_to]:checked").value;switch(s){case"option":a=document.querySelector(".js-copyOptionToOptionName").value,n=document.querySelector(".js-copyOptionToOptionCreate").checked,t={currentOption:c,copySelection:s,newOption:a,checkboxCreate:n};break;case"user field":r=document.querySelector(".js-optToUserFieldID").value,o=document.querySelector(".js-optToUserFieldName").value,n=document.querySelector(".js-optToUserFieldCreate").checked,t={currentOption:c,copySelection:s,userID:r,userField:o,checkboxCreate:n};break;case"post field":l=document.querySelector(".js-optToPostFieldID").value,i=document.querySelector(".js-optToPostFieldName").value,n=document.querySelector(".js-optToPostFieldCreate").checked,t={currentOption:c,copySelection:s,postID:l,postField:i,checkboxCreate:n}}var u=JSON.stringify(t);j({path:"".concat("dapre-cft/v1","/").concat(S),method:"POST",body:u,parse:!1,headers:{"Content-type":"application/json"}}).then((function(e){return e.json()})).then((function(e){!function(e,t){var n,a,r,o,l,i,c,s=document.querySelector(".js-currentOptionName");if(e.copied)switch(s.value="",(c=new Lightbox({openAnimation:"fadein",closeAnimation:"shrink"})).setTitle("Done"),t){case"option":a=document.querySelector(".js-copyOptionToOptionName"),n=document.querySelector(".js-copyOptionToOptionCreate"),a.value="",n.checked=!1;break;case"user field":r=document.querySelector(".js-optToUserFieldID"),o=document.querySelector(".js-optToUserFieldName"),n=document.querySelector(".js-optToUserFieldCreate"),r.value="",o.value="",n.checked=!1;break;case"post field":l=document.querySelector(".js-optToPostFieldID"),i=document.querySelector(".js-optToPostFieldName"),n=document.querySelector(".js-optToPostFieldCreate"),l.value="",i.value="",n.checked=!1}else(c=new Lightbox({openAnimation:"jelly",closeAnimation:"collapse"})).setTitle("ERROR");c.setContent(e.message),c.open(),b(),N.disabled=!1}(e,s)}))}),!0);var O=wp.apiFetch,F=document.querySelector(".js-submitRenameUserField"),E=document.querySelector(".js-submitCopyUserField"),C="".concat("user_fields","/rename"),g="".concat("user_fields","/copy");F.addEventListener("click",(function(e){e.preventDefault(),y(),F.disabled=!0;var t={userID:document.querySelector(".js-userFieldRenameUserID").value,oldFieldName:document.querySelector(".js-oldUserFieldName").value,newFieldName:document.querySelector(".js-newUserFieldName").value},n=JSON.stringify(t);O({path:"".concat("dapre-cft/v1","/").concat(C),method:"POST",body:n,parse:!1,headers:{"Content-type":"application/json"}}).then((function(e){return e.json()})).then((function(e){!function(e){var t,n=document.querySelector(".js-userFieldRenameUserID"),a=document.querySelector(".js-oldUserFieldName"),r=document.querySelector(".js-newUserFieldName");e.renamed?((t=new Lightbox({openAnimation:"fadein",closeAnimation:"shrink"})).setTitle("Done"),n.value="",a.value="",r.value=""):(t=new Lightbox({openAnimation:"jelly",closeAnimation:"collapse"})).setTitle("ERROR"),t.setContent(e.message),t.open(),b(),F.disabled=!1}(e)}))}),!1),E.addEventListener("click",(function(e){var t,n,a,r,o,l,i;e.preventDefault(),y(),E.disabled=!0;var c=document.querySelector(".js-userFieldCopyUserID").value,s=document.querySelector(".js-userFieldCopyFieldName").value,u=document.querySelector("input[type=radio][name=copy_user_field_to]:checked").value;switch(u){case"option":a=document.querySelector(".js-userFieldToOptionName").value,n=document.querySelector(".js-userFieldToOptionCreate").checked,t={currentUserID:c,currentFieldName:s,copySelection:u,newOption:a,checkboxCreate:n};break;case"user field":r=document.querySelector(".js-userFieldToUserFieldID").value,o=document.querySelector(".js-userFieldToUserFieldName").value,n=document.querySelector(".js-userFieldToUserFieldCreate").checked,t={currentUserID:c,currentFieldName:s,copySelection:u,userID:r,userField:o,checkboxCreate:n};break;case"post field":l=document.querySelector(".js-userFieldToPostFieldID").value,i=document.querySelector(".js-userFieldToPostFieldName").value,n=document.querySelector(".js-userFieldToPostFieldCreate").checked,t={currentUserID:c,currentFieldName:s,copySelection:u,postID:l,postField:i,checkboxCreate:n}}var d=JSON.stringify(t);O({path:"".concat("dapre-cft/v1","/").concat(g),method:"POST",body:d,parse:!1,headers:{"Content-type":"application/json"}}).then((function(e){return e.json()})).then((function(e){!function(e,t){var n,a,r,o,l,i,c,s=document.querySelector(".js-userFieldCopyUserID"),u=document.querySelector(".js-userFieldCopyFieldName");if(e.copied)switch(s.value="",u.value="",(c=new Lightbox({openAnimation:"fadein",closeAnimation:"shrink"})).setTitle("Done"),t){case"option":a=document.querySelector(".js-userFieldToOptionName"),n=document.querySelector(".js-userFieldToOptionCreate"),a.value="",n.checked=!1;break;case"user field":r=document.querySelector(".js-userFieldToUserFieldID"),o=document.querySelector(".js-userFieldToUserFieldName"),n=document.querySelector(".js-userFieldToUserFieldCreate"),r.value="",o.value="",n.checked=!1;break;case"post field":l=document.querySelector(".js-userFieldToPostFieldID"),i=document.querySelector(".js-userFieldToPostFieldName"),n=document.querySelector(".js-userFieldToPostFieldCreate"),l.value="",i.value="",n.checked=!1}else(c=new Lightbox({openAnimation:"jelly",closeAnimation:"collapse"})).setTitle("ERROR");c.setContent(e.message),c.open(),b(),E.disabled=!1}(e,u)}))}),!0);var T=wp.apiFetch,x=document.querySelector(".js-submitRenamePostField"),_=document.querySelector(".js-submitCopyPostField"),D="".concat("post_fields","/rename"),I="".concat("post_fields","/copy");x.addEventListener("click",(function(e){e.preventDefault(),y(),x.disabled=!0;var t={postID:document.querySelector(".js-postFieldRenamePostID").value,oldFieldName:document.querySelector(".js-oldPostFieldName").value,newFieldName:document.querySelector(".js-newPostFieldName").value},n=JSON.stringify(t);T({path:"".concat("dapre-cft/v1","/").concat(D),method:"POST",body:n,parse:!1,headers:{"Content-type":"application/json"}}).then((function(e){return e.json()})).then((function(e){!function(e){var t,n=document.querySelector(".js-postFieldRenamePostID"),a=document.querySelector(".js-oldPostFieldName"),r=document.querySelector(".js-newPostFieldName");e.renamed?((t=new Lightbox({openAnimation:"fadein",closeAnimation:"shrink"})).setTitle("Done"),n.value="",a.value="",r.value=""):(t=new Lightbox({openAnimation:"jelly",closeAnimation:"collapse"})).setTitle("ERROR"),t.setContent(e.message),t.open(),b(),x.disabled=!1}(e)}))}),!1),_.addEventListener("click",(function(e){var t,n,a,r,o,l,i;e.preventDefault(),y(),_.disabled=!0;var c=document.querySelector(".js-postFieldCopyPostID").value,s=document.querySelector(".js-postFieldCopyFieldName").value,u=document.querySelector("input[type=radio][name=copy_post_field_to]:checked").value;switch(u){case"option":a=document.querySelector(".js-postFieldToOptionName").value,n=document.querySelector(".js-postFieldToOptionCreate").checked,t={currentPostID:c,currentFieldName:s,copySelection:u,newOption:a,checkboxCreate:n};break;case"user field":r=document.querySelector(".js-postFieldToUserFieldID").value,o=document.querySelector(".js-postFieldToUserFieldName").value,n=document.querySelector(".js-postFieldToUserFieldCreate").checked,t={currentPostID:c,currentFieldName:s,copySelection:u,userID:r,userField:o,checkboxCreate:n};break;case"post field":l=document.querySelector(".js-postFieldToPostFieldID").value,i=document.querySelector(".js-postFieldToPostFieldName").value,n=document.querySelector(".js-postFieldToPostFieldCreate").checked,t={currentPostID:c,currentFieldName:s,copySelection:u,postID:l,postField:i,checkboxCreate:n}}var d=JSON.stringify(t);T({path:"".concat("dapre-cft/v1","/").concat(I),method:"POST",body:d,parse:!1,headers:{"Content-type":"application/json"}}).then((function(e){return e.json()})).then((function(e){!function(e,t){var n,a,r,o,l,i,c,s=document.querySelector(".js-postFieldCopyPostID"),u=document.querySelector(".js-postFieldCopyFieldName");if(e.copied)switch(s.value="",u.value="",(c=new Lightbox({openAnimation:"fadein",closeAnimation:"shrink"})).setTitle("Done"),t){case"option":a=document.querySelector(".js-postFieldToOptionName"),n=document.querySelector(".js-postFieldToOptionCreate"),a.value="",n.checked=!1;break;case"user field":l=document.querySelector(".js-postFieldToUserFieldID"),o=document.querySelector(".js-postFieldToUserFieldName"),n=document.querySelector(".js-postFieldToUserFieldCreate"),l.value="",o.value="",n.checked=!1;break;case"post field":r=document.querySelector(".js-postFieldToPostFieldID"),i=document.querySelector(".js-postFieldToPostFieldName"),n=document.querySelector(".js-postFieldToPostFieldCreate"),r.value="",i.value="",n.checked=!1}else(c=new Lightbox({openAnimation:"jelly",closeAnimation:"collapse"})).setTitle("ERROR");c.setContent(e.message),c.open(),b(),_.disabled=!1}(e,u)}))}),!0);var q=n(0),k=n.n(q),A=n(3),V=n(2),P=n.n(V),R=n(1),L=n.n(R),W=wp.i18n.__,M=function(e){var t=e.className;return wp.element.createElement("div",{className:t},wp.element.createElement("div",null,"Option Name"),wp.element.createElement("div",null,W("Actions","dapre-cft")),wp.element.createElement("div",null,W("Value to Add","dapre-cft")),wp.element.createElement("div",null,W("Current Value","dapre-cft")),wp.element.createElement("div",null,W("Current Value Options","dapre-cft")),wp.element.createElement("div",null,W("Previous Value","dapre-cft")))};var U=function(e){var t=e.className,n=e.title,a=e.content,r=e.arrowClick,o=Object(q.createRef)();return Object(q.useEffect)((function(){var e=o.current.parentElement;o.current.style.top="".concat(e.offsetTop+e.offsetHeight-10,"px")}),[o]),wp.element.createElement("div",{className:t,title:n,ref:o,onClick:function(e){var t;t="-"===a?e.target.parentElement.nextElementSibling.dataset.index:e.target.parentElement.dataset.index,r(t,a)}},a)};var J=function(e){var t=e.className,n=e.inputValue,a=e.fieldNameValue,r=e.inputName,o=e.inputType,l=e.inputClass,i=e.errorClassName,c=e.errorMessageClassName,s=e.errorMessage,u=e.action,d=Object(q.useState)(""),m=L()(d,2),p=m[0],f=m[1],v=Object(q.createRef)(),y=Object(q.useCallback)((function(e){f(e.target.value),a(e.target.value)}),[a]);return Object(q.useEffect)((function(){v.current.disabled="write"===u||"delete"===u}),[u,v]),Object(q.useEffect)((function(){f(n)}),[n]),wp.element.createElement("div",{className:t},wp.element.createElement("div",{className:i},wp.element.createElement("p",{className:c},s)),wp.element.createElement("input",{className:l,type:o,name:r,value:p,ref:v,onChange:y}))};var H=function(e){var t=e.className,n=e.dataIndex,a=e.onChange,r=e.resetPage,o=e.restoreEvent,l=e.errorMessage,i=e.disableWrite,c=e.disableDelete,s=Object(q.useState)("read"),u=L()(s,2),d=u[0],m=u[1],p=Object(q.useState)(!0),f=L()(p,2),v=f[0],y=f[1],b=Object(q.useState)(!1),j=L()(b,2),h=j[0],N=j[1],w=Object(q.useState)(!1),S=L()(w,2),O=S[0],F=S[1],E=Object(q.useRef)(),C=Object(q.useRef)(),g=Object(q.useRef)();function T(e){m(e.target.value),a(e)}return Object(q.useEffect)((function(){r&&(E.current.click(),o())}),[r,o]),Object(q.useEffect)((function(){"read"===d&&(y(!0),N(!1),F(!1)),"write"===d&&(y(!1),N(!0),F(!1)),"delete"===d&&(y(!1),N(!1),F(!0))}),[d]),Object(q.useEffect)((function(){C.current.disabled=!!i,g.current.disabled=!!c,"This field does not exist."===l&&(g.current.disabled=!0),"This user does not exist."!==l&&"This post does not exist."!==l||(C.current.disabled=!0,g.current.disabled=!0)}),[c,i,l]),wp.element.createElement("div",{className:t},wp.element.createElement("label",null,wp.element.createElement("input",{className:"js-fieldAction",type:"radio",name:"field_action[".concat(n,"]"),value:"read",onChange:T,checked:v,ref:E}),"Read"),wp.element.createElement("label",null,wp.element.createElement("input",{className:"js-fieldAction",type:"radio",name:"field_action[".concat(n,"]"),value:"write",onChange:T,checked:h,ref:C}),"Write"),wp.element.createElement("label",null,wp.element.createElement("input",{className:"js-fieldAction",type:"radio",name:"field_action[".concat(n,"]"),value:"delete",onChange:T,checked:O,ref:g}),"Delete"))};var G=function(e){var t=Object(q.useState)(0),n=L()(t,2),a=n[0],r=n[1],o=Object(q.useState)(""),l=L()(o,2),i=l[0],c=l[1],s=Object(q.createRef)(),u=Object(q.createRef)(),d=Object(q.createRef)(),m=e.className,p=e.valueOptionsClass,y=e.valueOptionsLabelClass,b=e.textAreaClass,j=e.dataIndex,h=e.action,N=e.emptyArray,w=e.valueToAdd,S=e.resetPage;Object(q.useEffect)((function(){S&&(d.current.value="",s.current.checked=!1,u.current.checked=!1,N(!1),w(""))}),[N,s,S,d,u,w]);var O=Object(q.useCallback)((function(){w(d.current.value),u.current.disabled=!v(d.current.value)}),[d,u,w]);return Object(q.useEffect)((function(){"read"===h||"delete"===h?(s.current.disabled=!0,u.current.disabled=!0,d.current.disabled=!0):(s.current.disabled=!1,d.current.disabled=!1,O())}),[h,s,O,d,u]),Object(q.useEffect)((function(){s.current.disabled||(d.current.disabled=s.current.checked)}),[s,d]),wp.element.createElement("div",{className:m},wp.element.createElement("div",{className:p},wp.element.createElement("label",{className:y},wp.element.createElement("input",{className:"js-fieldValueToAdd js-emptyArray",type:"checkbox",name:"empty_array[".concat(j,"]"),value:"empty_array",ref:s,onChange:function(){N(s.current.checked)}}),wp.element.createElement("p",{title:"Replace the field content with an empty array"},"Add empty array")),wp.element.createElement("label",{className:y},wp.element.createElement("input",{className:"js-fieldValueToAdd js-dateString",type:"checkbox",name:"date_string[".concat(j,"]"),value:"date_string",ref:u,onChange:function(){if(f(d.current.value))if(d.current.value===a)d.current.value=i;else{var e=d.current.value;r(e);var t=new Date(parseInt(e,10));d.current.value=t.toUTCString(),c(d.current.value)}else if(d.current.value===i)d.current.value=a;else{var n=new Date(d.current.value),o=d.current.value;c(o),d.current.value=n.valueOf(),r(d.current.value)}w(d.current.value)}}),wp.element.createElement("p",null,"Toggle date string/timestamp"))),wp.element.createElement("textarea",{className:b,name:"field_value[".concat(j,"]"),rows:"2",ref:d,onChange:O}))},B=function(e){var t=e.className,n=e.currentValue;return wp.element.createElement("div",{className:t},n)};var $=function(e){var t=e.className,n=e.dataIndex,a=e.currentValue,r=e.onChange,o=Object(q.useState)("is-visible"),l=L()(o,2),i=l[0],c=l[1];return Object(q.useEffect)((function(){v(a)?c("is-visible"):c("is-hidden")}),[a]),wp.element.createElement("div",{className:t},wp.element.createElement("label",{className:"js-curValueDateToggle c-optionField__fieldCurValueOption ".concat(i)},wp.element.createElement("p",null,"Toggle date string/timestamp"),wp.element.createElement("input",{className:"js-fieldDateStringCurValue",type:"checkbox",name:"date_string_show[".concat(n,"]"),value:"",onChange:r})))},z=function(e){var t=e.className,n=e.previousValue;return wp.element.createElement("div",{className:t},n)};var K=function(e){var t=e.className,n=e.rowIndex,a=e.dataIndex,r=e.fieldName,o=e.errorClass,l=e.errorMessage,i=e.previousValue,c=e.disableWrite,s=e.disableDelete,u=e.arrowTitle,d=e.arrowContent,m=e.currentValue,p=e.rowChange,v=e.resetPage,y=e.restoreEvent,b=e.arrowClick,j=Object(q.useState)("read"),h=L()(j,2),N=h[0],w=h[1],S=Object(q.useState)(!1),O=L()(S,2),F=O[0],E=O[1],C=Object(q.useState)(""),g=L()(C,2),T=g[0],x=g[1],_=Object(q.useState)(""),D=L()(_,2),I=D[0],k=D[1],A=Object(q.useState)(""),V=L()(A,2),P=V[0],R=V[1],W=Object(q.useState)("-color-white"),M=L()(W,2),K=M[0],Q=M[1],X=Object(q.useState)(0),Y=L()(X,2),Z=Y[0],ee=Y[1],te=Object(q.useState)(""),ne=L()(te,2),ae=ne[0],re=ne[1];Object(q.useEffect)((function(){p({rowIndex:n,optionName:I,valueToWrite:T,index:a,emptyArray:F,action:N})}),[N,F,a,I,n,p,T]);var oe=Object(q.useCallback)((function(e){k(e)}),[]);Object(q.useEffect)((function(){k(r)}),[r]);var le=Object(q.useCallback)((function(e){x(e)}),[]),ie=Object(q.useCallback)((function(e){E(e)}),[]),ce=Object(q.useCallback)((function(e){w(e.target.value)}),[]),se=Object(q.useCallback)((function(){if(f(P))if(parseInt(P,10)===Z)R(ae);else{var e=parseInt(P,10);ee(e);var t=new Date(e);R(t.toUTCString()),re(t.toUTCString())}else if(P===ae)R(parseInt(Z,10));else{var n=new Date(P);re(P),R(n.valueOf()),ee(n.valueOf())}}),[ae,Z,P]);return Object(q.useEffect)((function(){"read"===N&&Q("-color-white"),"write"===N&&Q("-color-blue"),"delete"===N&&Q("-color-orange")}),[N]),Object(q.useEffect)((function(){R(m)}),[m]),wp.element.createElement("div",{className:"".concat(t," ").concat(o," ").concat(K),"data-index":a},wp.element.createElement(U,{className:"js-addRemoveOptionRow c-addRemoveFieldRow c-addRemoveFieldRow__add",title:u,content:d,arrowClick:function(e,t){b(e,t)}}),wp.element.createElement(J,{className:"c-optionField__fieldName",errorClassName:"c-optionField__fieldErrorContainer",errorMessageClassName:"js-fieldErrorMessage c-optionField__fieldErrorMessage",inputClass:"js-optionFieldName c-optionField__fieldInput",inputType:"text",inputName:"field_name",inputValue:I,fieldNameValue:oe,errorMessage:l,action:N}),wp.element.createElement(H,{className:"c-optionField__fieldActions",dataIndex:a,onChange:ce,resetPage:v,restoreEvent:y,errorMessage:l,disableWrite:c,disableDelete:s}),wp.element.createElement(G,{className:"c-optionField__fieldValueToAdd",valueOptionsClass:"c-optionField__fieldValueOptions",valueOptionsLabelClass:"c-optionField__fieldValueOptionLabel",textAreaClass:"js-metaFieldInputValue c-optionField__fieldValueToAddTextarea",disableWrite:c,disableDelete:s,dataIndex:a,action:N,emptyArray:ie,valueToAdd:le,resetPage:v}),wp.element.createElement(B,{className:"js-fieldCurrentValue c-optionField__fieldCurValue",currentValue:P}),wp.element.createElement($,{className:"c-optionField__fieldCurValueOptions",currentValue:m,dataIndex:a,onChange:se}),wp.element.createElement(z,{className:"js-fieldPreviousValue c-optionField__fieldPrevValue",previousValue:i}))},Q=wp.apiFetch,X="".concat("dapre-cft/v1","/").concat("options");var Y=function(){var e=Object(q.useState)([]),t=L()(e,2),n=t[0],a=t[1],r=Object(q.useState)([]),o=L()(r,2),l=o[0],i=o[1],c=Object(q.useState)(!1),s=L()(c,2),u=s[0],d=s[1],m=Object(q.createRef)(),p=[],f=[],v=[],j=!1,h=!1,N=!1;function w(){if(j&&h&&N){var e=p.concat(f).concat(v).sort((function(e,t){return e.index<t.index?-1:1}));a(e),d(!0),b()}}function S(e){var t=[],n=[],a=[],r={},o={},l={};e.forEach((function(e){"read"===e.action?(r={index:e.index,optionName:e.optionName},t.push(r)):"write"===e.action?(o={index:e.index,optionName:e.optionName,emptyArray:e.emptyArray,valueToWrite:e.valueToWrite},n.push(o)):"delete"===e.action&&(l={index:e.index,optionName:e.optionName},a.push(l))})),y(),j=!1,function(e){if(0!==e.length){var t=JSON.stringify(e);j=!1,Q({path:"".concat(X,"?").concat("options","=").concat(t),method:"GET",parse:!1}).then((function(e){return e.json()})).then((function(e){j=!0,p=e,w()}))}else j=!0}(t),h=!1,function(e){if(0!==e.length){var t=JSON.stringify(e);h=!1,Q({path:X,method:"POST",body:t,parse:!1,headers:{"Content-type":"application/json"}}).then((function(e){return e.json()})).then((function(e){h=!0,f=e,w()}))}else h=!0}(n),N=!1,function(e){if(0!==e.length){var t=JSON.stringify(e);N=!1,Q({path:X,method:"DELETE",body:t,parse:!1,headers:{"Content-type":"application/json"}}).then((function(e){return e.json()})).then((function(e){N=!0,v=e,w()}))}else N=!0}(a)}Object(q.useEffect)((function(){var e=JSON.stringify("all");Q({path:"".concat(X,"?all_options=").concat(e),method:"GET",parse:!1}).then((function(e){return e.json()})).then((function(e){var t=[];a(e),e.map((function(e,n){t[n]={index:e.index,optionName:e.fieldName,emptyArray:"",action:"read",valueToWrite:""}})),i(t),S(t)}))}),[]);var O=Object(q.useCallback)((function(e){var t={index:e.index,optionName:e.optionName,emptyArray:e.emptyArray,action:e.action,valueToWrite:e.valueToWrite},n=l;n[e.rowIndex]=t,i(n)}),[l]);function F(e){var t=new Array(e.length);e.forEach((function(e,n){t[n]={index:e.index,optionName:e.optionName,emptyArray:e.emptyArray,action:e.action,valueToWrite:e.valueToWrite}})),i(t)}function E(){d(!1)}function C(e,t){var r="".concat("options","/update"),o="".concat("dapre-cft/v1","/").concat(r);if("+"===t){var l=n[n.length-1],i=parseInt(l.index,10)+1,c={fieldID:!1,fieldName:"",index:i,currentValueDateToggle:"is-hidden",currentValue:JSON.stringify(""),disableDelete:!0,disableWrite:!0,error:"",previousValue:JSON.stringify(""),rowErrorClass:""},s=JSON.stringify(i);y(),Q({path:o,method:"POST",body:s,parse:!1,headers:{"Content-type":"application/json"}}).then((function(e){return e.json()})).then((function(e){b(),e.error||(a([].concat(P()(n),[c])),F([].concat(P()(n),[c])))}))}else{var u=n.findIndex((function(t){return t.index===parseInt(e,10)}));n.splice(u,1);var d=JSON.stringify(n);y(),Q({path:o,method:"DELETE",body:d,parse:!1,headers:{"Content-type":"application/json"}}).then((function(e){return e.json()})).then((function(e){b(),e.error||(a(P()(n)),F(n))}))}}return wp.element.createElement(k.a.Fragment,null,wp.element.createElement("div",{className:"js-optionsMetaSection o-meta"},wp.element.createElement(M,{className:"c-optionsMetaHeaders"}),n.map((function(e,t){var a="Add another row",r="+";return t+1<n.length&&(a="Remove the next row",r="-"),wp.element.createElement(K,{className:"js-optionFieldDataRow c-optionField",rowIndex:t,dataIndex:e.index,fieldName:e.fieldName,errorClass:e.rowErrorClass,errorMessage:e.error,currentValue:JSON.parse(e.currentValue),previousValue:JSON.parse(e.previousValue),disableWrite:e.disableWrite,disableDelete:e.disableDelete,arrowTitle:a,arrowContent:r,arrowClick:C,rowChange:O,resetPage:u,restoreEvent:E})}))),wp.element.createElement("input",{className:"js-submitOptions c-metaSubmitButton button button-primary",type:"submit",name:"submit_options",value:"Read/Write Values",ref:m,onClick:function(e){e.preventDefault(),S(l)}}))},Z=wp.i18n.__,ee=function(e){var t=e.className;return wp.element.createElement("div",{className:t},wp.element.createElement("div",null,"User ID"),wp.element.createElement("div",null,"Field Name"),wp.element.createElement("div",null,Z("Actions","dapre-cft")),wp.element.createElement("div",null,Z("Value to Add","dapre-cft")),wp.element.createElement("div",null,Z("Current Value","dapre-cft")),wp.element.createElement("div",null,Z("Current Value Options","dapre-cft")),wp.element.createElement("div",null,Z("Previous Value","dapre-cft")))};var te=function(e){var t=e.className,n=e.inputValue,a=e.fieldIDValue,r=e.inputName,o=e.inputType,l=e.inputClass,i=e.errorClassName,c=e.errorMessageClassName,s=e.errorMessage,u=e.action,d=Object(q.useState)(""),m=L()(d,2),p=m[0],f=m[1],v=Object(q.createRef)(),y=Object(q.useCallback)((function(e){f(e.target.value),a(e.target.value)}),[a]);return Object(q.useEffect)((function(){v.current.disabled="write"===u||"delete"===u}),[u,v]),Object(q.useEffect)((function(){f(n)}),[n]),wp.element.createElement("div",{className:t},wp.element.createElement("div",{className:i},wp.element.createElement("p",{className:c},s)),wp.element.createElement("input",{className:l,type:o,step:"1",min:"0",name:r,value:p,ref:v,onChange:y}))};var ne=function(e){var t=e.className,n=e.rowIndex,a=e.dataIndex,r=e.fieldID,o=e.fieldName,l=e.errorClass,i=e.errorMessage,c=e.previousValue,s=e.disableWrite,u=e.disableDelete,d=e.arrowTitle,m=e.arrowContent,p=e.currentValue,v=e.rowChange,y=e.resetPage,b=e.restoreEvent,j=e.arrowClick,h=Object(q.useState)("read"),N=L()(h,2),w=N[0],S=N[1],O=Object(q.useState)(!1),F=L()(O,2),E=F[0],C=F[1],g=Object(q.useState)(""),T=L()(g,2),x=T[0],_=T[1],D=Object(q.useState)(""),I=L()(D,2),k=I[0],A=I[1],V=Object(q.useState)(""),P=L()(V,2),R=P[0],W=P[1],M=Object(q.useState)(""),K=L()(M,2),Q=K[0],X=K[1],Y=Object(q.useState)("-color-white"),Z=L()(Y,2),ee=Z[0],ne=Z[1],ae=Object(q.useState)(0),re=L()(ae,2),oe=re[0],le=re[1],ie=Object(q.useState)(""),ce=L()(ie,2),se=ce[0],ue=ce[1];Object(q.useEffect)((function(){v({rowIndex:n,fieldID:k,fieldName:R,valueToWrite:x,index:a,emptyArray:E,action:w})}),[w,E,a,k,R,n,v,x]);var de=Object(q.useCallback)((function(e){W(e)}),[]),me=Object(q.useCallback)((function(e){A(e)}),[]);Object(q.useEffect)((function(){W(o)}),[o]),Object(q.useEffect)((function(){A(r)}),[r]);var pe=Object(q.useCallback)((function(e){_(e)}),[]),fe=Object(q.useCallback)((function(e){C(e)}),[]),ve=Object(q.useCallback)((function(e){S(e.target.value)}),[]),ye=Object(q.useCallback)((function(){if(f(Q))if(parseInt(Q,10)===oe)X(se);else{var e=parseInt(Q,10);le(e);var t=new Date(e);X(t.toUTCString()),ue(t.toUTCString())}else if(Q===se)X(parseInt(oe,10));else{var n=new Date(Q);ue(Q),X(n.valueOf()),le(n.valueOf())}}),[se,oe,Q]);return Object(q.useEffect)((function(){"read"===w&&ne("-color-white"),"write"===w&&ne("-color-blue"),"delete"===w&&ne("-color-orange")}),[w]),Object(q.useEffect)((function(){X(p)}),[p]),wp.element.createElement("div",{className:"".concat(t," ").concat(l," ").concat(ee),"data-index":a},wp.element.createElement(U,{className:"js-addRemoveUserRow c-addRemoveFieldRow c-addRemoveFieldRow__add",title:d,content:m,arrowClick:function(e,t){j(e,t)}}),wp.element.createElement(te,{className:"c-metaField__fieldName",errorClassName:"c-metaField__fieldErrorContainer",errorMessageClassName:"js-fieldErrorMessage c-metaField__fieldErrorMessage",inputClass:"js-userFieldName c-metaField__fieldInput",inputType:"number",inputName:"user_id",inputValue:k,fieldIDValue:me,action:w}),wp.element.createElement(J,{className:"c-metaField__fieldName",errorClassName:"c-metaField__fieldErrorContainer",errorMessageClassName:"js-userErrorMessage c-metaField__fieldErrorMessage",inputClass:"js-metaFieldName c-metaField__fieldInput",inputType:"text",inputName:"field_name",inputValue:R,fieldNameValue:de,errorMessage:i,action:w}),wp.element.createElement(H,{className:"c-metaField__fieldActions",dataIndex:a,onChange:ve,resetPage:y,restoreEvent:b,errorMessage:i,disableWrite:s,disableDelete:u}),wp.element.createElement(G,{className:"c-metaField__fieldValueToAdd",valueOptionsClass:"c-metaField__fieldValueOptions",valueOptionsLabelClass:"c-metaField__fieldValueOptionLabel",textAreaClass:"js-metaFieldInputValue c-metaField__fieldValueToAddTextarea",disableWrite:s,disableDelete:u,dataIndex:a,action:w,emptyArray:fe,valueToAdd:pe,resetPage:y}),wp.element.createElement(B,{className:"js-fieldCurrentValue c-metaField__fieldCurValue",currentValue:Q}),wp.element.createElement($,{className:"c-metaField__fieldCurValueOptions",currentValue:p,dataIndex:a,onChange:ye}),wp.element.createElement(z,{className:"js-fieldPreviousValue c-metaField__fieldPrevValue",previousValue:c}))},ae=wp.apiFetch,re="".concat("dapre-cft/v1","/").concat("user_fields");var oe=function(){var e=Object(q.useState)([]),t=L()(e,2),n=t[0],a=t[1],r=Object(q.useState)([]),o=L()(r,2),l=o[0],i=o[1],c=Object(q.useState)(!1),s=L()(c,2),u=s[0],d=s[1],m=Object(q.createRef)(),p=[],f=[],v=[],j=!1,h=!1,N=!1;function w(){if(j&&h&&N){var e=p.concat(f).concat(v).sort((function(e,t){return e.index<t.index?-1:1}));a(e),d(!0),b()}}function S(e){var t=[],n=[],a=[],r={},o={},l={};e.forEach((function(e){"read"===e.action?(r={index:e.index,userID:e.userID,fieldName:e.fieldName},t.push(r)):"write"===e.action?(o={index:e.index,userID:e.userID,fieldName:e.fieldName,emptyArray:e.emptyArray,valueToWrite:e.valueToWrite},n.push(o)):"delete"===e.action&&(l={index:e.index,userID:e.userID,fieldName:e.fieldName},a.push(l))})),y(),j=!1,function(e){if(0!==e.length){var t=JSON.stringify(e);j=!1,ae({path:"".concat(re,"?").concat("user_fields","=").concat(t),method:"GET",parse:!1}).then((function(e){return e.json()})).then((function(e){j=!0,p=e,w()}))}else j=!0}(t),h=!1,function(e){if(0!==e.length){var t=JSON.stringify(e);h=!1,ae({path:re,method:"POST",body:t,parse:!1,headers:{"Content-type":"application/json"}}).then((function(e){return e.json()})).then((function(e){h=!0,f=e,w()}))}else h=!0}(n),N=!1,function(e){if(0!==e.length){var t=JSON.stringify(e);N=!1,ae({path:re,method:"DELETE",body:t,parse:!1,headers:{"Content-type":"application/json"}}).then((function(e){return e.json()})).then((function(e){N=!0,v=e,w()}))}else N=!0}(a)}Object(q.useEffect)((function(){var e=JSON.stringify("all");ae({path:"".concat(re,"?all_fields=").concat(e),method:"GET",parse:!1}).then((function(e){return e.json()})).then((function(e){var t=[];a(e),e.map((function(e,n){t[n]={index:e.index,userID:e.fieldID,fieldName:e.fieldName,emptyArray:"",action:"read",valueToWrite:""},e.fieldID&&e.fieldName||(e.disableWrite=!0,e.disableDelete=!0)})),i(t),S(t)}))}),[]);var O=Object(q.useCallback)((function(e){var t={index:e.index,userID:e.fieldID,fieldName:e.fieldName,emptyArray:e.emptyArray,action:e.action,valueToWrite:e.valueToWrite},n=l;n[e.rowIndex]=t,i(n)}),[l]);function F(e){var t=new Array(e.length);e.forEach((function(e,n){t[n]={index:e.index,userID:e.fieldID,fieldName:e.fieldName,emptyArray:e.emptyArray,action:e.action,valueToWrite:e.valueToWrite}})),i(t)}function E(){d(!1)}function C(e,t){var r="".concat("user_fields","/update"),o="".concat("dapre-cft/v1","/").concat(r);if("+"===t){var l=n[n.length-1],i=parseInt(l.index,10)+1,c={fieldID:0,fieldName:"",index:i,currentValueDateToggle:"is-hidden",currentValue:JSON.stringify(""),disableDelete:!0,disableWrite:!0,error:"",previousValue:JSON.stringify(""),rowErrorClass:""},s=JSON.stringify(i);y(),ae({path:o,method:"POST",body:s,parse:!1,headers:{"Content-type":"application/json"}}).then((function(e){return e.json()})).then((function(e){b(),e.error||(a([].concat(P()(n),[c])),F([].concat(P()(n),[c])))}))}else{var u=n.findIndex((function(t){return t.index===parseInt(e,10)}));n.splice(u,1);var d=JSON.stringify(n);y(),ae({path:o,method:"DELETE",body:d,parse:!1,headers:{"Content-type":"application/json"}}).then((function(e){return e.json()})).then((function(e){b(),e.error||(a(P()(n)),F(n))}))}}return wp.element.createElement(k.a.Fragment,null,wp.element.createElement("div",{className:"js-userFieldsSection o-meta"},wp.element.createElement(ee,{className:"c-metaFieldsHeaders"}),n.map((function(e,t){var a="Add another row",r="+";return t+1<n.length&&(a="Remove the next row",r="-"),wp.element.createElement(ne,{className:"js-userFieldsDataRow c-metaField",rowIndex:t,dataIndex:e.index,fieldID:e.fieldID,fieldName:e.fieldName,errorClass:e.rowErrorClass,errorMessage:e.error,currentValue:JSON.parse(e.currentValue),previousValue:JSON.parse(e.previousValue),disableWrite:e.disableWrite,disableDelete:e.disableDelete,arrowTitle:a,arrowContent:r,arrowClick:C,rowChange:O,resetPage:u,restoreEvent:E})}))),wp.element.createElement("input",{className:"js-submitUserFields c-metaSubmitButton button button-primary",type:"submit",name:"submit_user_fields",value:"Read/Write Values",ref:m,onClick:function(e){e.preventDefault(),S(l)}}))},le=wp.i18n.__,ie=function(e){var t=e.className;return wp.element.createElement("div",{className:t},wp.element.createElement("div",null,"Post ID"),wp.element.createElement("div",null,"Field Name"),wp.element.createElement("div",null,le("Actions","dapre-cft")),wp.element.createElement("div",null,le("Value to Add","dapre-cft")),wp.element.createElement("div",null,le("Current Value","dapre-cft")),wp.element.createElement("div",null,le("Current Value Options","dapre-cft")),wp.element.createElement("div",null,le("Previous Value","dapre-cft")))};var ce=function(e){var t=e.className,n=e.rowIndex,a=e.dataIndex,r=e.fieldID,o=e.fieldName,l=e.errorClass,i=e.errorMessage,c=e.previousValue,s=e.disableWrite,u=e.disableDelete,d=e.arrowTitle,m=e.arrowContent,p=e.currentValue,v=e.rowChange,y=e.resetPage,b=e.restoreEvent,j=e.arrowClick,h=Object(q.useState)("read"),N=L()(h,2),w=N[0],S=N[1],O=Object(q.useState)(!1),F=L()(O,2),E=F[0],C=F[1],g=Object(q.useState)(""),T=L()(g,2),x=T[0],_=T[1],D=Object(q.useState)(""),I=L()(D,2),k=I[0],A=I[1],V=Object(q.useState)(""),P=L()(V,2),R=P[0],W=P[1],M=Object(q.useState)(""),K=L()(M,2),Q=K[0],X=K[1],Y=Object(q.useState)("-color-white"),Z=L()(Y,2),ee=Z[0],ne=Z[1],ae=Object(q.useState)(0),re=L()(ae,2),oe=re[0],le=re[1],ie=Object(q.useState)(""),ce=L()(ie,2),se=ce[0],ue=ce[1];Object(q.useEffect)((function(){v({rowIndex:n,fieldID:k,fieldName:R,valueToWrite:x,index:a,emptyArray:E,action:w})}),[w,E,a,k,R,n,v,x]);var de=Object(q.useCallback)((function(e){W(e)}),[]),me=Object(q.useCallback)((function(e){A(e)}),[]);Object(q.useEffect)((function(){W(o)}),[o]),Object(q.useEffect)((function(){A(r)}),[r]);var pe=Object(q.useCallback)((function(e){_(e)}),[]),fe=Object(q.useCallback)((function(e){C(e)}),[]),ve=Object(q.useCallback)((function(e){S(e.target.value)}),[]),ye=Object(q.useCallback)((function(){if(f(Q))if(parseInt(Q,10)===oe)X(se);else{var e=parseInt(Q,10);le(e);var t=new Date(e);X(t.toUTCString()),ue(t.toUTCString())}else if(Q===se)X(parseInt(oe,10));else{var n=new Date(Q);ue(Q),X(n.valueOf()),le(n.valueOf())}}),[se,oe,Q]);return Object(q.useEffect)((function(){"read"===w&&ne("-color-white"),"write"===w&&ne("-color-blue"),"delete"===w&&ne("-color-orange")}),[w]),Object(q.useEffect)((function(){X(p)}),[p]),wp.element.createElement("div",{className:"".concat(t," ").concat(l," ").concat(ee),"data-index":a},wp.element.createElement(U,{className:"js-addRemovePostRow c-addRemoveFieldRow c-addRemoveFieldRow__add",title:d,content:m,arrowClick:function(e,t){j(e,t)}}),wp.element.createElement(te,{className:"c-metaField__fieldName",errorClassName:"c-metaField__fieldErrorContainer",errorMessageClassName:"js-fieldErrorMessage c-metaField__fieldErrorMessage",inputClass:"js-postFieldName c-metaField__fieldInput",inputType:"number",inputName:"post_id",inputValue:k,fieldIDValue:me,action:w}),wp.element.createElement(J,{className:"c-metaField__fieldName",errorClassName:"c-metaField__fieldErrorContainer",errorMessageClassName:"js-postErrorMessage c-metaField__fieldErrorMessage",inputClass:"js-metaFieldName c-metaField__fieldInput",inputType:"text",inputName:"field_name",inputValue:R,fieldNameValue:de,errorMessage:i,action:w}),wp.element.createElement(H,{className:"c-metaField__fieldActions",dataIndex:a,onChange:ve,resetPage:y,restoreEvent:b,errorMessage:i,disableWrite:s,disableDelete:u}),wp.element.createElement(G,{className:"c-metaField__fieldValueToAdd",valueOptionsClass:"c-metaField__fieldValueOptions",valueOptionsLabelClass:"c-metaField__fieldValueOptionLabel",textAreaClass:"js-metaFieldInputValue c-metaField__fieldValueToAddTextarea",disableWrite:s,disableDelete:u,dataIndex:a,action:w,emptyArray:fe,valueToAdd:pe,resetPage:y}),wp.element.createElement(B,{className:"js-fieldCurrentValue c-metaField__fieldCurValue",currentValue:Q}),wp.element.createElement($,{className:"c-metaField__fieldCurValueOptions",currentValue:p,dataIndex:a,onChange:ye}),wp.element.createElement(z,{className:"js-fieldPreviousValue c-metaField__fieldPrevValue",previousValue:c}))},se=wp.apiFetch,ue="".concat("dapre-cft/v1","/").concat("post_fields");var de=function(){var e=Object(q.useState)([]),t=L()(e,2),n=t[0],a=t[1],r=Object(q.useState)([]),o=L()(r,2),l=o[0],i=o[1],c=Object(q.useState)(!1),s=L()(c,2),u=s[0],d=s[1],m=Object(q.createRef)(),p=[],f=[],v=[],j=!1,h=!1,N=!1;function w(){if(j&&h&&N){var e=p.concat(f).concat(v).sort((function(e,t){return e.index<t.index?-1:1}));a(e),d(!0),b()}}function S(e){var t=[],n=[],a=[],r={},o={},l={};e.forEach((function(e){"read"===e.action?(r={index:e.index,postID:e.postID,fieldName:e.fieldName},t.push(r)):"write"===e.action?(o={index:e.index,postID:e.postID,fieldName:e.fieldName,emptyArray:e.emptyArray,valueToWrite:e.valueToWrite},n.push(o)):"delete"===e.action&&(l={index:e.index,postID:e.postID,fieldName:e.fieldName},a.push(l))})),y(),j=!1,function(e){if(0!==e.length){var t=JSON.stringify(e);j=!1,se({path:"".concat(ue,"?").concat("post_fields","=").concat(t),method:"GET",parse:!1}).then((function(e){return e.json()})).then((function(e){j=!0,p=e,w()}))}else j=!0}(t),h=!1,function(e){if(0!==e.length){var t=JSON.stringify(e);h=!1,se({path:ue,method:"POST",body:t,parse:!1,headers:{"Content-type":"application/json"}}).then((function(e){return e.json()})).then((function(e){h=!0,f=e,w()}))}else h=!0}(n),N=!1,function(e){if(0!==e.length){var t=JSON.stringify(e);N=!1,se({path:ue,method:"DELETE",body:t,parse:!1,headers:{"Content-type":"application/json"}}).then((function(e){return e.json()})).then((function(e){N=!0,v=e,w()}))}else N=!0}(a)}Object(q.useEffect)((function(){var e=JSON.stringify("all");se({path:"".concat(ue,"?all_fields=").concat(e),method:"GET",parse:!1}).then((function(e){return e.json()})).then((function(e){var t=[];a(e),e.map((function(e,n){t[n]={index:e.index,postID:e.fieldID,fieldName:e.fieldName,emptyArray:"",action:"read",valueToWrite:""},e.fieldID&&e.fieldName||(e.disableWrite=!0,e.disableDelete=!0)})),i(t),S(t)}))}),[]);var O=Object(q.useCallback)((function(e){var t={index:e.index,postID:e.fieldID,fieldName:e.fieldName,emptyArray:e.emptyArray,action:e.action,valueToWrite:e.valueToWrite},n=l;n[e.rowIndex]=t,i(n)}),[l]);function F(e){var t=new Array(e.length);e.forEach((function(e,n){t[n]={index:e.index,postID:e.fieldID,fieldName:e.fieldName,emptyArray:e.emptyArray,action:e.action,valueToWrite:e.valueToWrite}})),i(t)}function E(){d(!1)}function C(e,t){var r="".concat("post_fields","/update"),o="".concat("dapre-cft/v1","/").concat(r);if("+"===t){var l=n[n.length-1],i=parseInt(l.index,10)+1,c={fieldID:0,fieldName:"",index:i,currentValueDateToggle:"is-hidden",currentValue:JSON.stringify(""),disableDelete:!0,disableWrite:!0,error:"",previousValue:JSON.stringify(""),rowErrorClass:""},s=JSON.stringify(i);y(),se({path:o,method:"POST",body:s,parse:!1,headers:{"Content-type":"application/json"}}).then((function(e){return e.json()})).then((function(e){b(),e.error||(a([].concat(P()(n),[c])),F([].concat(P()(n),[c])))}))}else{var u=n.findIndex((function(t){return t.index===parseInt(e,10)}));n.splice(u,1);var d=JSON.stringify(n);y(),se({path:o,method:"DELETE",body:d,parse:!1,headers:{"Content-type":"application/json"}}).then((function(e){return e.json()})).then((function(e){b(),e.error||(a(P()(n)),F(n))}))}}return wp.element.createElement(k.a.Fragment,null,wp.element.createElement("div",{className:"js-postFieldsSection o-meta"},wp.element.createElement(ie,{className:"c-metaFieldsHeaders"}),n.map((function(e,t){var a="Add another row",r="+";return t+1<n.length&&(a="Remove the next row",r="-"),wp.element.createElement(ce,{className:"js-postFieldsDataRow c-metaField",rowIndex:t,dataIndex:e.index,fieldID:e.fieldID,fieldName:e.fieldName,errorClass:e.rowErrorClass,errorMessage:e.error,currentValue:JSON.parse(e.currentValue),previousValue:JSON.parse(e.previousValue),disableWrite:e.disableWrite,disableDelete:e.disableDelete,arrowTitle:a,arrowContent:r,arrowClick:C,rowChange:O,resetPage:u,restoreEvent:E})}))),wp.element.createElement("input",{className:"js-submitPostFields c-metaSubmitButton button button-primary",type:"submit",name:"submit_post_fields",value:"Read/Write Values",ref:m,onClick:function(e){e.preventDefault(),S(l)}}))};Object(A.render)(wp.element.createElement(Y,null),document.querySelector("#optionsMetaSection")),Object(A.render)(wp.element.createElement(oe,null),document.querySelector("#usersMetaSection")),Object(A.render)(wp.element.createElement(de,null),document.querySelector("#postsMetaSection"))}]);